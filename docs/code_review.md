# 코드 리뷰: 웹사이트 성능 및 코드 품질 개선 제안

## 1. 요약

현재 코드베이스는 Create React App 기반으로 잘 구조화되어 있으나, 웹사이트의 핵심 기능인 **갤러리 데이터 처리 방식**에서 심각한 성능 저하 문제가 발견되었습니다. 모든 이미지 데이터를 프론트엔드에 하드코딩하여 한 번에 불러오는 현재 구조는 사용자의 초기 로딩 경험에 치명적이며, 아카이브가 커질수록 상황은 더욱 악화될 것입니다.

또한, 일부 사용되지 않는 대용량 파일이 저장소에 포함되어 있고, 코드 내 라이브러리 사용 방식이 일관되지 않은 점 등 유지보수성을 저해하는 요소들이 발견되었습니다.

본 문서는 이러한 문제점들을 상세히 기술하고, 성능 개선과 코드 품질 향상을 위한 구체적인 해결 방안을 제안합니다.

---

## 2. 심각도 높은 문제 (Critical Issues)

### 2.1. 갤러리 데이터 로딩 방식 (가장 시급)

**문제점:**
- **모든 이미지 데이터를 프론트엔드 번들에 포함:** `src/data/gallery.ts` 파일에 1,200개가 넘는 모든 갤러리 이미지의 메타데이터가 하드코딩되어 있습니다.
- **초기 로딩 시 전체 데이터 전송:** 사용자가 갤러리 페이지에 접속하면, 현재 보이지 않는 이미지를 포함한 모든 이미지의 정보를 한 번에 다운로드하게 됩니다. 이는 초기 로딩 시간을 크게 증가시키는 주된 원인입니다.
- **클라이언트 측에서의 과도한 연산:** `GallerySection.tsx` 컴포넌트는 전체 이미지 데이터를 받은 후, 클라이언트(브라우저)에서 정렬과 필터링을 수행합니다. 데이터 양이 많기 때문에 사용자의 기기, 특히 저사양 모바일 기기에서 버벅임(jank)이나 지연을 유발할 수 있습니다.
- **확장성 부재:** 새로운 이미지가 추가될 때마다 `gallery.ts` 파일은 계속 커지고, 이는 웹사이트 성능을 지속적으로 악화시킬 것입니다.

**개선 방향:**
- **API 기반 데이터 로딩으로 전환:**
  1. 현재는 사용되지 않는 `server.ts`와 같은 백엔드 서버를 제대로 구축합니다.
  2. 이미지 메타데이터를 DB나 별도의 JSON 파일로 분리하여 서버에서 관리합니다.
  3. 프론트엔드는 API를 통해 **페이지네이션(Pagination)**(예: 한 번에 20개씩)과 **서버 사이드 필터링**을 적용하여 현재 화면에 필요한 최소한의 데이터만 요청하도록 리팩토링해야 합니다.

---

## 3. 코드 품질 및 유지보수성 문제

### 3.1. 불필요한 의존성 및 레거시 자산

**문제점:**
- **`next` 라이브러리:** `package.json`의 `devDependencies`에 `next`가 포함되어 있습니다. 현재 프로젝트는 Create React App 기반이므로 이 라이브러리는 사용되지 않는 것으로 보이며, 불필요하게 의존성을 복잡하게 만듭니다.
- **대용량 미사용 이미지:** `public/hero-bg.jpg` (약 2MB) 파일과 이로부터 생성된 `hero-bg.webp` 파일이 코드베이스에 존재하지만, 실제 `HeroSection` 컴포넌트에서는 다른 이미지를 사용하고 있습니다. 이는 저장소 용량을 낭비하는 레거시 자산입니다.

**개선 방향:**
- `npm uninstall next` 명령을 통해 불필요한 `next` 라이브러리를 제거합니다.
- `public/hero-bg.jpg`와 `public/hero-bg.webp` 파일을 프로젝트에서 삭제합니다.

### 3.2. 모달 구현의 비일관성

**문제점:**
- `ImageLightbox.tsx`는 `framer-motion`을 사용해 직접 구현된 반면, `MusicianModal.tsx`는 `@headlessui/react` 라이브러리를 사용하고 있습니다.
- 두 컴포넌트 모두 모달(Modal) UI를 제공하지만, 구현 방식과 기반 라이브러리가 달라 일관성이 떨어지며 향후 유지보수를 어렵게 만듭니다.

**개선 방향:**
- 모달 구현 방식을 한 가지로 통일합니다. `@headlessui/react`는 접근성을 잘 지원하고 UI 로직을 효과적으로 분리할 수 있으므로, 이를 표준으로 삼는 것을 권장합니다. `ImageLightbox` 컴포넌트를 `@headlessui/react` 기반으로 리팩토링하는 것을 고려해볼 수 있습니다.

### 3.3. WebP 이미지 Fallback 부재

**문제점:**
- 코드 전반에서 `.webp` 이미지를 직접 사용하고 있습니다. WebP는 뛰어난 압축률을 제공하지만, 아주 오래된 버전의 브라우저에서는 지원되지 않을 수 있습니다.
- 이 경우, 해당 사용자에게는 이미지가 보이지 않는 문제가 발생합니다.

**개선 방향:**
- 범용적인 지원이 중요하다면, `<picture>` 태그를 사용하여 JPG나 PNG 같은 fallback 이미지를 함께 제공하는 것을 고려해야 합니다.
  ```html
  <picture>
    <source srcset="image.webp" type="image/webp">
    <source srcset="image.jpg" type="image/jpeg">
    <img src="image.jpg" alt="...">
  </picture>
  ```

---

## 4. 개선 권장 사항 (우선순위 순)

1.  **[P0 - 가장 시급] 갤러리 데이터 로딩 방식 리팩토링:**
    - 백엔드 API를 구축하여 페이지네이션 및 서버 사이드 필터링을 구현합니다. `GallerySection.tsx`가 API로부터 페이징된 데이터를 받아오도록 수정합니다. 이는 웹사이트의 첫인상을 결정하는 초기 로딩 성능을 극적으로 개선할 것입니다.

2.  **[P1 - 중요] 불필요한 자산 및 의존성 제거:**
    - `public/hero-bg.jpg`, `public/hero-bg.webp` 파일을 삭제합니다.
    - `next` 라이브러리를 `devDependencies`에서 제거합니다.

3.  **[P2 - 보통] 모달 구현 방식 통일:**
    - 프로젝트의 모든 모달을 `@headlessui/react` 기반으로 표준화하여 코드의 일관성과 유지보수성을 높입니다.

4.  **[P3 - 낮음] WebP Fallback 이미지 제공:**
    - `<picture>` 태그를 도입하여 구형 브라우저에 대한 이미지 호환성을 강화합니다. 서비스 대상 사용자층을 고려하여 적용 여부를 결정합니다.
